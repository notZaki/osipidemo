
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Creating a Python test file &#8212; OSIPI Code</title>
    
  <link href="_static/css/theme.css" rel="stylesheet">
  <link href="_static/css/index.ff1ffe594081f20da1ef19478df9384b.css" rel="stylesheet">

    
  <link rel="stylesheet"
    href="_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-book-theme.css?digest=c3fdc42140077d1ad13ad2f1588a4309" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="_static/js/index.be7d3bbb2ef33a8344ce.js">

    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/togglebutton.js"></script>
    <script src="_static/clipboard.min.js"></script>
    <script src="_static/copybutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="_static/sphinx-book-theme.12a9622fbb08dcb3a2a40b2c02b83a57.js"></script>
    <script async="async" src="https://unpkg.com/thebe@0.5.1/lib/index.js"></script>
    <script>
        const thebe_selector = ".thebe"
        const thebe_selector_input = "pre"
        const thebe_selector_output = ".output"
    </script>
    <script async="async" src="_static/sphinx-thebe.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Contributors" href="contributors.html" />
    <link rel="prev" title="Create a copy of the respository and contribute changes" href="localguide.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="index.html">
      
        <!-- `logo` is deprecated in Sphinx 4.0, so remove this when we stop supporting 3 -->
        
      
      
      <img src="_static/logo.png" class="logo" alt="logo">
      
      
      <h1 class="site-logo" id="site-title">OSIPI Code</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        <ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="intro.html">
   OSIPI Code Demo
  </a>
 </li>
</ul>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="T1mapping.html">
   T1 mapping
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="vfatestoverview.html">
     VFA T1 Mapping: Test Overview
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="T1_tests_output.html">
     Visualize output T1 mapping tests
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="T1mapping_QIBAv1.html">
     QIBA v1
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="T1mapping_QIBAv2.html">
     QIBA v2
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="ToftsModel.html">
   Tofts Model
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/>
  <label for="toctree-checkbox-2">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="DCE_ToftsModel.html">
     QIBA V6 - Tofts Model
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 current active has-children">
  <a class="reference internal" href="guidelines.html">
   Guidelines for code contribution
  </a>
  <input checked="" class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/>
  <label for="toctree-checkbox-3">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul class="current">
   <li class="toctree-l2">
    <a class="reference internal" href="localguide.html">
     Create a copy of the respository and contribute changes
    </a>
   </li>
   <li class="toctree-l2 current active">
    <a class="current reference internal" href="#">
     Creating a Python test file
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="contributors.html">
   Contributors
  </a>
 </li>
</ul>

    </div>
</nav> <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="topbar container-xl fixed-top">
    <div class="topbar-contents row">
        <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show"></div>
        <div class="col pl-md-4 topbar-main">
            
            <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
                data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
                aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
                title="Toggle navigation" data-toggle="tooltip" data-placement="left">
                <i class="fas fa-bars"></i>
                <i class="fas fa-arrow-left"></i>
                <i class="fas fa-arrow-up"></i>
            </button>
            
            
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="_sources/localtests.md"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.md</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
            onClick="window.print()" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

            <!-- Source interaction buttons -->

            <!-- Full screen (wrap in <a> to have style consistency -->

<a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
        data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
        title="Fullscreen mode"><i
            class="fas fa-expand"></i></button></a>

            <!-- Launch buttons -->

        </div>

        <!-- Table of contents -->
        <div class="d-none d-md-block col-md-2 bd-toc show">
            
            <div class="tocsection onthispage pt-5 pb-3">
                <i class="fas fa-list"></i> Contents
            </div>
            <nav id="bd-toc-nav" aria-label="Page">
                <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#installing-pre-requisites-dependencies">
   Installing pre-requisites / dependencies
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#creating-a-test-file">
   Creating a test file
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#test-file-contents">
     Test File Contents
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#executing-a-test">
     Executing a test
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#useful-links-for-unit-testing-with-python">
   Useful links for unit testing with Python
  </a>
 </li>
</ul>

            </nav>
        </div>
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
        
              <div>
                
  <div class="tex2jax_ignore mathjax_ignore section" id="creating-a-python-test-file">
<h1>Creating a Python test file<a class="headerlink" href="#creating-a-python-test-file" title="Permalink to this headline">¶</a></h1>
<p>This guide briefly describes how to get started with writing a unit test in Python using <code class="docutils literal notranslate"><span class="pre">pytest</span></code></p>
<div class="section" id="installing-pre-requisites-dependencies">
<h2>Installing pre-requisites / dependencies<a class="headerlink" href="#installing-pre-requisites-dependencies" title="Permalink to this headline">¶</a></h2>
<p>Testing is performed using <code class="docutils literal notranslate"><span class="pre">pytest</span></code> and can be installed using <code class="docutils literal notranslate"><span class="pre">pip</span></code></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>pip install -U pytest
</pre></div>
</div>
<p>or with the <code class="docutils literal notranslate"><span class="pre">conda</span></code> package manager as shown below.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>conda install -c conda-forge pytest
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">Numpy</span></code> and <code class="docutils literal notranslate"><span class="pre">scipy</span></code> are commonly used scientific packages that can similary be installed using <code class="docutils literal notranslate"><span class="pre">pip</span></code> or <code class="docutils literal notranslate"><span class="pre">conda</span></code> package managers.</p>
</div>
<div class="section" id="creating-a-test-file">
<h2>Creating a test file<a class="headerlink" href="#creating-a-test-file" title="Permalink to this headline">¶</a></h2>
<p>Let’s assume for our purpose, all the source code is located in a folder <strong>src</strong>, and all the test code is located in a folder <strong>test</strong>.</p>
<p>The <strong>test</strong> file corresponding to the <strong>src</strong> file to be tested, is named by either adding the prefix <em><strong>test_</strong></em> or the suffix <em><strong>_test</strong></em> to the name of the <strong>src</strong> file. In our case, the <em><strong>test_</strong></em> nomenclature has been adopted.</p>
<div class="section" id="test-file-contents">
<h3>Test File Contents<a class="headerlink" href="#test-file-contents" title="Permalink to this headline">¶</a></h3>
<p>An example test file is shown as follows. Details on the test-specific code can be found on <a class="reference external" href="https://docs.pytest.org/en/stable/getting-started.html">Pytest Docs</a>.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>#Example 1:test_OSIPItf.py

def capital_case(x):
    return x.capitalize()

def test_capital_case():
    assert capital_case(&#39;perfusion&#39;) == &#39;Perfusion&#39;
</pre></div>
</div>
<p>It is important to note that the <em>test_</em> prefix convention use continues within the test file as well to denote which functions perform the test routines. In another example shown below, the test cases and the functions being tested are locted in different files.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>#Example 2: test_example_functions.py

from src.example_functions import add, remove_spaces
import pytest

@pytest.mark.parametrize(&#39;x, y, result&#39;, [
    (10,10,20),
    (12,0,12),
    (-1,-6,-7)
    ])
def test_add(x, y, result):
    assert add(x,y) == result

@pytest.mark.parametrize(&#39;data, result&#39;, [
    (&#39;a b&#39;, &#39;ab&#39;),
    (&#39;first last&#39;, &#39;firstlast&#39;)
    ])
def test_remove_spaces(data,result):
    assert remove_spaces(data) == result
</pre></div>
</div>
</div>
<div class="section" id="executing-a-test">
<h3>Executing a test<a class="headerlink" href="#executing-a-test" title="Permalink to this headline">¶</a></h3>
<p>The results of the test can then be obtained using <code class="docutils literal notranslate"><span class="pre">$</span> <span class="pre">pytest</span></code> at the command line. If we perform this for Example 1, we see the following output:
<img alt="Test Pass" src="_images/ex1_testpass.png" />
Now, if example 1 were modified to</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>#Example 1:test_OSIPItf.py

def capital_case(x):
    return x.capitalize()

def test_capital_case():
    assert capital_case(&#39;perfusion&#39;) == &#39;Perfusion&#39;
    assert capital_case(&#39;osipi&#39;) == &#39;OSIPI&#39;
</pre></div>
</div>
<p>the output of <code class="docutils literal notranslate"><span class="pre">$</span> <span class="pre">pytest</span></code> would result in a filed test as shown below.<br />
<img alt="Test Fail" src="_images/ex1_testfail.png" />
As indicated in the failure message, the test failed for the case where the output of <code class="docutils literal notranslate"><span class="pre">capital_case('osipi')</span></code> - the expected output <em>OSIPI</em> is different from the function output <em>Osipi</em>.</p>
</div>
</div>
<div class="section" id="useful-links-for-unit-testing-with-python">
<h2>Useful links for unit testing with Python<a class="headerlink" href="#useful-links-for-unit-testing-with-python" title="Permalink to this headline">¶</a></h2>
<ol class="simple">
<li><p><a class="reference external" href="https://docs.pytest.org/en/stable/reference.html">Pytest API</a></p></li>
<li><p><a class="reference external" href="https://buildmedia.readthedocs.org/media/pdf/pytest/latest/pytest.pdf">Pytest documentation</a></p></li>
<li><p><a class="reference external" href="https://realpython.com/python-testing/">Basics of Unit Testing</a></p></li>
</ol>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./."
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
        
            <!-- Previous / next buttons -->
<div class='prev-next-area'> 
    <a class='left-prev' id="prev-link" href="localguide.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">Create a copy of the respository and contribute changes</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="contributors.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Contributors</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
        
        </div>
    </div>
    <footer class="footer">
    <div class="container">
      <p>
        
          By OSIPI<br/>
        
            &copy; Copyright 2021.<br/>
      </p>
    </div>
  </footer>
</main>


      </div>
    </div>
  
  <script src="_static/js/index.be7d3bbb2ef33a8344ce.js"></script>

  </body>
</html>